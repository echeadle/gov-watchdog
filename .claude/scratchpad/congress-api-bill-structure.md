# Congress.gov API - Bill Summaries & Subjects Structure

## Overview
Congress.gov provides rich bill data through two complementary endpoints for understanding bill content and classification.

---

## 1. SUMMARIES ENDPOINT: `/bill/{congress}/{type}/{number}/summaries`

### HTTP Request
```
GET https://api.congress.gov/v3/bill/119/hr/1/summaries?api_key=YOUR_KEY
```

### Response Structure
```json
{
  "request": { /* metadata */ },
  "summaries": [
    {
      "actionDate": "2025-01-07",
      "actionDesc": "Introduced in House",
      "text": "<html>...(15k-65k characters)...</html>",
      "updateDate": "2025-01-10T15:30:00Z",
      "versionCode": "00"
    },
    {
      "actionDate": "2025-02-15",
      "actionDesc": "Passed House",
      "text": "<html>...(updated summary)...</html>",
      "updateDate": "2025-02-16T10:00:00Z",
      "versionCode": "53"
    }
  ]
}
```

### Field Descriptions
| Field | Type | Description |
|-------|------|-------------|
| actionDate | ISO 8601 date | When the legislative action occurred |
| actionDesc | string | Human-readable description of the action |
| text | HTML string | Full summary content (15k-65k chars) |
| updateDate | ISO 8601 timestamp | Last modification time |
| versionCode | string | Version identifier (00-99) |

### Version Codes (Common)
| Code | Meaning |
|------|---------|
| 00 | Introduced |
| 07 | Reported to House |
| 49 | Public Law |
| 53 | Passed House |
| 55 | Passed Senate |

### Summary Content Characteristics
- Generated by Congressional Research Service (CRS)
- HTML-formatted with semantic structure
- Organizes provisions by policy area
- Includes specific program modifications
- Expands in detail as bill progresses through legislature
- Contains:
  - Official title and purpose
  - Detailed provision descriptions
  - References to affected programs
  - Implementation details

### Example Snippet
```
"This bill reduces taxes, reduces or increases spending for various federal 
programs, increases the statutory debt limit. Title I contains agricultural 
conservation provisions affecting Department of Agriculture programs. Title II 
addresses defense appropriations and military modernization..."
```

---

## 2. SUBJECTS ENDPOINT: `/bill/{congress}/{type}/{number}/subjects`

### HTTP Request
```
GET https://api.congress.gov/v3/bill/119/hr/1/subjects?api_key=YOUR_KEY
```

### Response Structure
```json
{
  "request": { /* metadata */ },
  "subjects": {
    "legislativeSubjects": [
      {
        "name": "Abortion",
        "updateDate": "2025-01-10T15:30:00Z"
      },
      {
        "name": "Accounting and auditing",
        "updateDate": "2025-01-10T15:30:00Z"
      },
      {
        "name": "Administrative law and regulatory procedures",
        "updateDate": "2025-01-10T15:30:00Z"
      },
      {
        "name": "Advanced technology and technological innovations",
        "updateDate": "2025-01-10T15:30:00Z"
      },
      {
        "name": "Agricultural conservation and pollution",
        "updateDate": "2025-01-10T15:30:00Z"
      },
      {
        "name": "Agricultural insurance",
        "updateDate": "2025-01-10T15:30:00Z"
      },
      {
        "name": "Agricultural prices, subsidies, credit",
        "updateDate": "2025-01-10T15:30:00Z"
      },
      {
        "name": "Air quality",
        "updateDate": "2025-01-10T15:30:00Z"
      }
    ],
    "policyArea": {
      "name": "Economics and Public Finance",
      "updateDate": "2025-01-10T15:30:00Z"
    }
  }
}
```

### Data Structure Notes
- **Flat hierarchy**: No nested categories - each subject is independent
- **Pagination**: Results paginated (20 per page in test)
- **Total count**: 238 subjects for test bill (likely varies by bill scope)
- **Policy Area**: Single top-level categorization

### Subject Categories Observed
- Policy domains: Abortion, Accounting, Administrative law, Technology
- Resource management: Agricultural insurance, Agricultural prices, subsidies
- Environmental: Air quality, Agricultural conservation
- Geographic: Alabama, Alaska, Afghanistan (state/region references)

---

## Practical Applications for Bill Search Feature

### 1. Full-Text Search on Summaries
```python
# Search bill summaries for keywords
async def search_bills_by_keyword(keyword: str, congress: int):
    # Use summary text for full-text search capability
    # Characters available: 15k-65k per summary
    # Rich content for semantic understanding
    pass
```

### 2. Topic/Subject Filtering
```python
# Filter bills by subject
async def search_bills_by_subject(subject: str, congress: int):
    # Use flat legislative subjects
    # Examples: "Climate change", "War powers", "Healthcare"
    # No hierarchy complexity to handle
    pass
```

### 3. Policy Area Classification
```python
# Group bills by broad policy area
async def get_bills_by_policy_area(area: str):
    # "Economics and Public Finance"
    # "Defense"
    # "Healthcare"
    # etc.
    pass
```

### 4. Bill Evolution Tracking
```python
# Show how bill evolved through versions
async def get_bill_versions(congress: int, bill_type: str, number: int):
    # Introduced (00) → Passed House (53) → Passed Senate (55) → Law (49)
    # Each version has updated summary
    pass
```

---

## MongoDB Schema Recommendations

### Bills Collection - Extended
```javascript
{
  "_id": ObjectId,
  "bill_id": "hr1-119",
  "congress": 119,
  "type": "hr",
  "number": 1,
  "title": "Official title...",
  
  // Subjects storage
  "policy_area": "Economics and Public Finance",
  "legislative_subjects": [
    "Abortion",
    "Accounting and auditing",
    "Agricultural conservation and pollution",
    // ... up to 238 subjects for complex bills
  ],
  
  // Summaries storage
  "summaries": [
    {
      "version_code": "00",
      "action_date": ISODate("2025-01-07"),
      "action_desc": "Introduced in House",
      "text_html": "...(full HTML content)...",
      "updated_at": ISODate("2025-01-10T15:30:00Z")
    },
    {
      "version_code": "53",
      "action_date": ISODate("2025-02-15"),
      "action_desc": "Passed House",
      "text_html": "...(updated HTML content)...",
      "updated_at": ISODate("2025-02-16T10:00:00Z")
    }
  ],
  
  // Search optimization
  "summary_text_plain": "...(plain text version for full-text search)...",
  
  "created_at": ISODate("2025-01-07"),
  "updated_at": ISODate("2025-02-16")
}
```

### Indexes for Search
```javascript
// Full-text search on summaries
db.bills.createIndex({ "summary_text_plain": "text", "title": "text" })

// Subject filtering
db.bills.createIndex({ "legislative_subjects": 1 })
db.bills.createIndex({ "policy_area": 1 })

// Version lookup
db.bills.createIndex({ "congress": 1, "type": 1, "number": 1 })
```

---

## API Rate Limiting & Best Practices

- **Rate limit**: 5,000 requests/hour
- **Caching strategy**: 
  - Summaries: Cache for 1 hour (frequently updated during session)
  - Subjects: Cache for 24 hours (rarely change)
  - Policy areas: Cache for 7 days (static list)
- **Fetch pattern**: Combine `/bill/{id}` + `/summaries` + `/subjects` in single workflow

---

## Size & Performance Notes

- Summary text: 15k-65k characters provides substantial content
- 238 subjects for complex budget bill (most bills: 10-50 subjects)
- HTML format requires parsing/stripping for display
- Subject names are clear and user-searchable
- No hierarchical structure simplifies indexing

